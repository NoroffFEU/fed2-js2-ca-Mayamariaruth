import{h as f,c as m}from"./authorPosts-a1AKxWD9.js";import{s as n}from"./feed-BD9eirZ7.js";async function h(o,i,e){const r={name:o,email:i,password:e},t=f();try{const s=await fetch(m,{method:"POST",headers:t,body:JSON.stringify(r)});if(!s.ok){const a=await s.json();throw new Error(a.errors?.[0]?.message||"Registration failed")}return await s.json()}catch(s){throw console.error("Error registering user:",s),s}}async function g(o){o.preventDefault();const i=o.target,e=i.username,r=i.email,t=i.password,s=e.value.trim(),a=r.value.trim(),d=t.value;[e,r,t].forEach(l=>l.classList.remove("is-invalid"));let c=!1;if(s||(e.classList.add("is-invalid"),c=!0),a||(r.classList.add("is-invalid"),c=!0),d||(t.classList.add("is-invalid"),c=!0),c){n("Please fill in all fields","error");return}const u=s.match(/[^\w\s]/g);if(u&&u.length>0&&!s.includes("_")){e.classList.add("is-invalid"),n("Username can only contain letters, numbers, and underscores","error");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a)||!a.endsWith("@stud.noroff.no")){r.classList.add("is-invalid"),n("Email must be a valid @stud.noroff.no address","error");return}if(d.length<8){t.classList.add("is-invalid"),n("Password must be at least 8 characters","error");return}try{await h(s,a,d)&&(sessionStorage.setItem("notification",JSON.stringify({type:"success",message:"Registered successfully!"})),window.location.href="/fed2-js2-ca-Mayamariaruth/auth/login/")}catch(l){n(l.message,"error")}}const w=document.forms.registerForm;w.addEventListener("submit",g);
