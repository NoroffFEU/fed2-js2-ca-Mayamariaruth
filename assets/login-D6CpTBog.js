import{h as c,b as d}from"./authorPosts-ya0caLeO.js";import{s as i,a as l,h as m}from"./feed-FQitdmyJ.js";async function f({email:r,password:s}){const a={email:r,password:s},t=c();try{const e=await fetch(d,{method:"POST",headers:t,body:JSON.stringify(a)}),o=await e.json();if(!e.ok)throw new Error(o.errors?.[0]?.message||"Login failed");return localStorage.setItem("accessToken",o.data.accessToken),localStorage.setItem("profile",JSON.stringify(o.data)),o.data}catch(e){throw console.error("Error logging in user:",e),e}}async function g(r){r.preventDefault();const s=r.target,a=s.email,t=s.password,e=a.value.trim().toLowerCase(),o=t.value;if(!e||!o){i("Please enter both email and password","error");return}try{l();const n=await f({email:e,password:o});sessionStorage.setItem("notification",JSON.stringify({type:"success",message:`Welcome back, ${n.name}!`})),window.location.href="/fed2-js2-ca-Mayamariaruth/"}catch(n){i(n.message,"error")}finally{m()}}const h=document.forms.loginForm;h.addEventListener("submit",g);
