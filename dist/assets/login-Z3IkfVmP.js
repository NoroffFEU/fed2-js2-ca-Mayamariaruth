import{h as c,b as m}from"./authorPosts-a1AKxWD9.js";import{s as i}from"./feed-B7ORXTyZ.js";async function d({email:r,password:s}){const t={email:r,password:s},a=c();try{const e=await fetch(m,{method:"POST",headers:a,body:JSON.stringify(t)}),o=await e.json();if(!e.ok)throw new Error(o.errors?.[0]?.message||"Login failed");return localStorage.setItem("accessToken",o.data.accessToken),localStorage.setItem("profile",JSON.stringify(o.data)),o.data}catch(e){throw console.error("Error logging in user:",e),e}}async function l(r){r.preventDefault();const s=r.target,t=s.email,a=s.password,e=t.value.trim().toLowerCase(),o=a.value;if(!e||!o){i("Please enter both email and password","error");return}try{const n=await d({email:e,password:o});sessionStorage.setItem("notification",JSON.stringify({type:"success",message:`Welcome back, ${n.name}!`})),window.location.href="/fed2-js2-ca-Mayamariaruth/"}catch(n){i(n.message,"error")}}const f=document.forms.loginForm;f.addEventListener("submit",l);
